{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,TextField,Button,List,ListItem,ListItemText,Checkbox,Card,CardContent,Typography}from'@mui/material';import{supabase}from'./supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[todos,setTodos]=useState([]);const[newTodo,setNewTodo]=useState('');useEffect(()=>{fetchTodos();},[]);async function fetchTodos(){const{data,error}=await supabase.from('todos').select('*').order('created_at',{ascending:false});if(error){console.error('Error fetching todos:',error);}else{setTodos(data||[]);}}async function addTodo(){if(!newTodo.trim())return;const{error}=await supabase.from('todos').insert([{task:newTodo,is_completed:false}]);if(error){console.error('Error adding todo:',error);}else{setNewTodo('');fetchTodos();}}async function toggleTodo(id,isCompleted){const{error}=await supabase.from('todos').update({is_completed:!isCompleted}).eq('id',id);if(error){console.error('Error updating todo:',error);}else{fetchTodos();}}async function deleteTodo(id){const{error}=await supabase.from('todos').delete().eq('id',id);if(error){console.error('Error deleting todo:',error);}else{fetchTodos();}}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"\\u5F85\\u8FA6\\u4E8B\\u9805\\u6E05\\u55AE\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,value:newTodo,onChange:e=>setNewTodo(e.target.value),placeholder:\"\\u65B0\\u589E\\u5F85\\u8FA6\\u4E8B\\u9805\",onKeyPress:e=>e.key==='Enter'&&addTodo()}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:addTodo,children:\"\\u65B0\\u589E\"})]}),/*#__PURE__*/_jsx(List,{children:todos.map(todo=>/*#__PURE__*/_jsx(Card,{sx:{mb:2},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(ListItem,{disableGutters:true,secondaryAction:/*#__PURE__*/_jsx(Button,{color:\"error\",onClick:()=>deleteTodo(todo.id),children:\"\\u522A\\u9664\"}),children:[/*#__PURE__*/_jsx(Checkbox,{checked:todo.is_completed,onChange:()=>toggleTodo(todo.id,todo.is_completed)}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsx(Typography,{style:{textDecoration:todo.is_completed?'line-through':'none'},children:todo.task})})]})})},todo.id))})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Container","TextField","Button","List","ListItem","ListItemText","Checkbox","Card","CardContent","Typography","supabase","jsx","_jsx","jsxs","_jsxs","App","todos","setTodos","newTodo","setNewTodo","fetchTodos","data","error","from","select","order","ascending","console","addTodo","trim","insert","task","is_completed","toggleTodo","id","isCompleted","update","eq","deleteTodo","delete","maxWidth","sx","mt","children","variant","component","gutterBottom","style","display","gap","marginBottom","fullWidth","value","onChange","e","target","placeholder","onKeyPress","key","onClick","map","todo","mb","disableGutters","secondaryAction","color","checked","primary","textDecoration"],"sources":["C:/Users/ASUS/Desktop/todo-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Container, \n  TextField, \n  Button, \n  List, \n  ListItem, \n  ListItemText,\n  Checkbox,\n  Card,\n  CardContent,\n  Typography\n} from '@mui/material';\nimport { supabase } from './supabaseClient';\n\nfunction App() {\n  const [todos, setTodos] = useState([]);\n  const [newTodo, setNewTodo] = useState('');\n\n  useEffect(() => {\n    fetchTodos();\n  }, []);\n\n  async function fetchTodos() {\n    const { data, error } = await supabase\n      .from('todos')\n      .select('*')\n      .order('created_at', { ascending: false });\n    \n    if (error) {\n      console.error('Error fetching todos:', error);\n    } else {\n      setTodos(data || []);\n    }\n  }\n\n  async function addTodo() {\n    if (!newTodo.trim()) return;\n\n    const { error } = await supabase\n      .from('todos')\n      .insert([{ task: newTodo, is_completed: false }]);\n\n    if (error) {\n      console.error('Error adding todo:', error);\n    } else {\n      setNewTodo('');\n      fetchTodos();\n    }\n  }\n\n  async function toggleTodo(id, isCompleted) {\n    const { error } = await supabase\n      .from('todos')\n      .update({ is_completed: !isCompleted })\n      .eq('id', id);\n\n    if (error) {\n      console.error('Error updating todo:', error);\n    } else {\n      fetchTodos();\n    }\n  }\n\n  async function deleteTodo(id) {\n    const { error } = await supabase\n      .from('todos')\n      .delete()\n      .eq('id', id);\n\n    if (error) {\n      console.error('Error deleting todo:', error);\n    } else {\n      fetchTodos();\n    }\n  }\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 4 }}>\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n        待辦事項清單\n      </Typography>\n      \n      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>\n        <TextField\n          fullWidth\n          value={newTodo}\n          onChange={(e) => setNewTodo(e.target.value)}\n          placeholder=\"新增待辦事項\"\n          onKeyPress={(e) => e.key === 'Enter' && addTodo()}\n        />\n        <Button variant=\"contained\" onClick={addTodo}>\n          新增\n        </Button>\n      </div>\n\n      <List>\n        {todos.map((todo) => (\n          <Card key={todo.id} sx={{ mb: 2 }}>\n            <CardContent>\n              <ListItem\n                disableGutters\n                secondaryAction={\n                  <Button \n                    color=\"error\" \n                    onClick={() => deleteTodo(todo.id)}\n                  >\n                    刪除\n                  </Button>\n                }\n              >\n                <Checkbox\n                  checked={todo.is_completed}\n                  onChange={() => toggleTodo(todo.id, todo.is_completed)}\n                />\n                <ListItemText\n                  primary={\n                    <Typography\n                      style={{\n                        textDecoration: todo.is_completed ? 'line-through' : 'none'\n                      }}\n                    >\n                      {todo.task}\n                    </Typography>\n                  }\n                />\n              </ListItem>\n            </CardContent>\n          </Card>\n        ))}\n      </List>\n    </Container>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}